{% for peer in item["ietf-network-topology:termination-point"] %}
{% if "mddo-topology:bgp-proc-termination-point-attributes" in peer and peer["mddo-topology:bgp-proc-termination-point-attributes"]["peer-group"] != "" %}
{% set attrs = peer["mddo-topology:bgp-proc-termination-point-attributes"] %}
        group {{ attrs["peer-group"] }} {
            family inet {
                unicast;
            }
            peer-as {{ attrs["remote-as"] }};
            local-as {{ attrs["local-as"] }};
{% if attrs["remote-as"] == attrs["local-as"] %}
            type internal;
{% else %}
            type external;
{% endif %}
            hold-time {{ attrs["timer"]["hold-time"] }};
{% for group_peer in item["ietf-network-topology:termination-point"] %}
{% if group_peer["mddo-topology:bgp-proc-termination-point-attributes"]["peer-group"] and group_peer["mddo-topology:bgp-proc-termination-point-attributes"]["peer-group"] == attrs["peer-group"] %}
            neighbor {{ group_peer["mddo-topology:bgp-proc-termination-point-attributes"]["remote-ip"] }} {
                local-address {{ group_peer["mddo-topology:bgp-proc-termination-point-attributes"]["local-ip"] }};
            }
{% endif %}
{% endfor %}
        }
{% endif %}
{% endfor %}
