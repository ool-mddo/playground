<!-- TOC -->

- [ネットワーク運用における検証作業とその課題](#%E3%83%8D%E3%83%83%E3%83%88%E3%83%AF%E3%83%BC%E3%82%AF%E9%81%8B%E7%94%A8%E3%81%AB%E3%81%8A%E3%81%91%E3%82%8B%E6%A4%9C%E8%A8%BC%E4%BD%9C%E6%A5%AD%E3%81%A8%E3%81%9D%E3%81%AE%E8%AA%B2%E9%A1%8C)
    - [試行錯誤のサイクル](#%E8%A9%A6%E8%A1%8C%E9%8C%AF%E8%AA%A4%E3%81%AE%E3%82%B5%E3%82%A4%E3%82%AF%E3%83%AB)
    - [検証環境のサイズ再現可能なシステムの規模](#%E6%A4%9C%E8%A8%BC%E7%92%B0%E5%A2%83%E3%81%AE%E3%82%B5%E3%82%A4%E3%82%BA%E5%86%8D%E7%8F%BE%E5%8F%AF%E8%83%BD%E3%81%AA%E3%82%B7%E3%82%B9%E3%83%86%E3%83%A0%E3%81%AE%E8%A6%8F%E6%A8%A1)
- [検証環境のトレードオフ](#%E6%A4%9C%E8%A8%BC%E7%92%B0%E5%A2%83%E3%81%AE%E3%83%88%E3%83%AC%E3%83%BC%E3%83%89%E3%82%AA%E3%83%95)

<!-- /TOC -->

---

# ネットワーク運用における検証作業とその課題

## 試行錯誤のサイクル

ネットワークに限らず、情報システムの品質保証のためにはテストや検証が欠かせません。このとき、アプリケーション(ソフトウェア)や、あるいは仮想化されたプラットフォーム、クラウドベースのシステムであれば、システム全体を同じものを使って再現して試験することができます。しかしハードウェアを使用しているシステムでは、実際の本番システムと同じものを使って検証するには、同じハードウェアを用意する必要があります。

![trial-cycle1](trial_cycle1.png)

ソフトウェアや仮想化されたリソース上では、本番同等のシステムを用意するためのコスト(時間・費用・必要な計算機リソース)はかなり小さくできますが、ハードウェアを使用するシステムではそうはいきません。ハードウェアの調達、設置場所、配線、電源の調整…などどうしても時間がかかり、結果として1回のトライアルに対するサイクルはどうしても長くなってしまいます。

![trial-cycle2](trial_cycle2.png)

## 検証環境のサイズ(再現可能なシステムの規模)

また、ネットワークは、複数のノードが相互に連携して全体として1つのシステムとして動作する自律分散システムです。ネットワークの動作を検証する際、コスト面の制約から、設定変更対象となるノードとその周辺の一部の構成だけを切り出して検証しています。しかし、ネットワークの一部、あるいは特定のノードの設定や動作を確認したときに問題がなくても、システム全体で見たときにその検証に含まれていない部分との整合性がうまく取れていないことがあります。こういう事象が起きてしまうと、局所的には動作するものの大域的にはトラブル(障害)が発生してしまいます。

![env size](env_size.png)

# 検証環境のトレードオフ

理想的には本番環境と全く同じ構成の検証環境を用意できればよいのですが、コスト・リソース等の制約により現実的には無理があります。そのため、やりたいこと(どのレイヤまで再現したいか)や、実現したいシステムのサイズなどに応じて適切な検証リソースを選択する必要があります。これには下の図のようなグラデーションがあり、作業のどのフェーズでどれくらいの精度で実現したいのか、どれくらいのサイクルで試行錯誤が必要なのか等を加味して検証環境を選択することになります。

![tradeoff](tradeoff.png)

従来のネットワーク運用では、検証環境は主に右側の2パターン、ハードウェアベース化VMベースで行われています。そのため、このプロジェクトでは左側の2パターン = 従来できなかったネットワークの検証 = ソフトウェア比率の高い方法で、手軽に・早く(高頻度で)・ネットワーク全体の動作を検証する方法の開発にとりくんでいます。

- シミュレータベースのアプローチ
    - ネットワークシミュレータを使った動作シミュレーション (linkdown simulation)
- コンテナベースのアプローチ
    - コンテナベースのネットワークで検証環境を自動構築し、そこで本番環境の動作を再現すること (copy emulated env)
